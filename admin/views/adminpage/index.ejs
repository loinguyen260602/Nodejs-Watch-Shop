<%- include('../layout', { title: 'Trang chủ Admin' }) %>
<div class="content">
    <h1>Dashboard</h1>
    <div class="admin-summary">
        <div class="summary-box">
            <h2>Sản phẩm</h2>
            <p>Tổng số sản phẩm: <%- totalProducts %></p>
        </div>
        <div class="summary-box">
            <h2>Người dùng</h2>
            <p>Tổng số người dùng: <%- totalUsers %></p>
        </div>
        <div class="summary-box">
            <h2>Đơn hàng</h2>
            <p>Tổng số đơn hàng: <%- totalOrders %></p>
        </div>
    </div>
    <canvas id="myChart" width="400" height="400"></canvas>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
      const data = JSON.parse('<%- JSON.stringify(data) %>');
      const ctx = document.getElementById('myChart').getContext('2d');
    
      new Chart(ctx, {
        type: 'pie',
        data: {
          labels: data.labels,
          datasets: [{
            label: 'Sản phẩm bán được',
            data: data.datasets[0].data,
            backgroundColor: data.datasets[0].backgroundColor,
            borderColor: data.datasets[0].borderColor,
            borderWidth: 1
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: true
            }
          },
          legend: {
            position: 'right' 
          }
        }
      });
    </script>
</div>

<style>
    .content {
        padding: 20px;
    }

    .admin-summary {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
    }

    .summary-box {
        background-color: #3498db;
        color: #fff;
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        width: 30%;
    }

    .summary-box h2 {
        font-size: 24px;
    }

    .summary-box p {
        font-size: 18px;
    }

    .recent-activity {
        margin-top: 20px;
    }

    .recent-activity h2 {
        font-size: 24px;
    }

    .recent-activity ul {
        list-style: disc;
        padding-left: 20px;
    }

    .recent-activity li {
        font-size: 18px;
        margin-bottom: 10px;
    }
</style>
